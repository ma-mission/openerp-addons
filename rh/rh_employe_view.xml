<?xml version="1.0" encoding="UTF-8"?>
<openerp>
<data>
	<record id="rh_employe_filter_view" model="ir.ui.view">
		<field name="name">rh.employe.search</field>
		<field name="model">rh.employe</field>
		<field name="arch" type="xml">
			<search string="Employe">
				<field name="complete_name" string="Employe"/>
				<field name="som" />
				<field name="etablissement_id" />
				<field name="departement_id" />
				<group expand="0" string="Group By...">
					<filter string="Etablissement" icon="terp-personal+" domain="[]" context="{'group_by':'etablissement_id'}"/>
					<filter string="Departement" icon="terp-personal+" domain="[]" context="{'group_by':'departement_id'}"/>
					<newline/>
					<filter string="Category" icon="terp-personal+" domain="[]" context="{'group_by':'category_id'}"/>
					<filter string="Corps" icon="terp-personal+" domain="[]" context="{'group_by':'corps_id'}"/>
					<filter string="Cadre" icon="terp-personal+" domain="[]" context="{'group_by':'cadre_id'}"/>
					<filter string="Grade" icon="terp-personal+" domain="[]" context="{'group_by':'grade_id'}"/>
				</group>
				<group expand="0" string="Filtres">
					<filter domain="[('fonction_ids.category_id.code','=','10'),('fonction_ids.state','=','A')]" help="Professors" icon="terp-personal+"/>
					<filter domain="[('fonction_ids.category_id.code','!=','10'),('fonction_ids.state','=','A')]" help="Administrators" icon="terp-personal+"/>
					
				</group>
			</search>
		</field>
	 </record>
	
	
	<record id="rh_employe_form_view" model="ir.ui.view">
            <field name="name">rh.employe.form</field>
            <field name="model">rh.employe</field>
            <field name="arch" type="xml">
                <form string="Employe" version="7.0">
				<sheet>
					<field name="image" widget='image' class="oe_left oe_avatar"/>
					<div class="oe_title oe_left">
						<h2>
							<label for="name" class="oe_edit_only"/><field name="name" required="1"  placeholder="Name"/>
							<label for="lastname" class="oe_edit_only"/><field name="lastname" required="1"/>
						</h2>
					</div>
					<notebook>
						<page string="General Informations">
							<group >
								<group string="Etat civil" col="2">
									<label for="name_ar"/><h2><field name="name_ar"/></h2>
									<label for="lastname_ar"/><h2><field name="lastname_ar"/></h2>
									<field name="gender" required="1"/>
									<field name="birthday" required="1"/>
									<field name="birthday_state" />
									<field name="birth_place" required="1"/>
									<field name="pays_id" required="1"/>
									<field name="marital" required="1"/>
									<field name="num_children"  attrs="{'invisible':[('marital', '=', 'single')]}"/>
								</group>
								<group string="Contact" col="2">
									<field name="cin" required="1"/>
									<field name="passport"/>
									<field name="adress" required="1"/>
									<field name="city_id" required="1"/>
									<field name="phone" />
									<field name="email" widget="email"/>
								</group>
								<group string="Contacte de travail" col="2">
									<field name="etablissement_id"  required="1" on_change="onchange_etablissement(etablissement_id)"/>
									<field name="departement_id" required="1" on_change="onchange_departement(departement_id)"/>
									<field name="office_localisation_id"/>
									<field name="office_station" />
									<field name="work_fleet" />
									<field name="work_email" widget="email"/>
								</group>
							</group>
						</page>
						<page string="Profession">
							<group col="6">
								<field name="som" required="1" />
								<field name="pb" />
								<field name="recrutement_date" required="1" />
								<field name="echelon_date_rel" readonly="1" />
								<field name="deduction_rel" readonly="1" />
								<field name="organisme_id" readonly="1" />
								<field name="date_retraite" readonly="1" />
							</group>
							<group col="2" string="Fonctions">
								<field name="fonction_ids" required="0" nolabel="1"  >
									<tree string="Fonctions"   colors="#009900:state=='A'; #CC7A00:state=='P'" fonts="bold:state=='A'">
										<field name="grade_id"/>
										<field name="echelon_date"/>
										<field name="echelon_id"/>
										<field name="state"/>
									</tree>
								</field>
							</group>
							
						</page>
						<page string="Salary">
							<group>
								<field name="annee_id"  widget="selection"/>
								<field name="mois" />
							</group>
							<group>
								<group string="Emoluments Bruts Annuels">
									<field name="emolument_ids" nolabel="1">
										<tree>
											<field name="rubrique_id" />
											<field name="price" />
										</tree>
									</field>	
								</group>	
								<group string="Retenues Annuelles">
									<field name="retenue_ids" nolabel="1">
										<tree>
											<field name="rubrique_id" />
											<field name="price"/>
										</tree>
									</field>	
								</group>	
							</group>
							<group>
								<field name="brut_annuel" style="width:20%%;text-align: right;font-size:14pt;" widget="monetary"/>
								<field name="retenues" style="width:20%%;text-align: right;font-size:14pt;" widget="monetary"/>
								<field name="net_annuel" style="width:20%%;text-align: right;font-size:14pt;" widget="monetary"/>
								<field name="net_mensuel" style="width:20%%;text-align: right;font-size:14pt;color:green" widget="monetary"/>
							</group>
						</page>
						<page string="Qualifications">
							<group>
								<field name="qualification_ids" required="0" nolabel="1" />
							</group>
						</page>
						<page string="Ordres de mission">
							<group>
								<field name="ordre_mission_ids" required="0" nolabel="1" >
									<tree string="Ordres de missions"   colors="#CC3300:state=='validated'; #FF0000:state=='draft';#009900:state=='payed'" fonts="bold:state=='draft'">
										<field name="doc_ref"/>
										<field name="date_depart"/>
										<field name="destination_id"/>
										<field name="nombre_de_jour"/>
										<field name="moyen_transport_id"/>
										<field name="state"/>
									</tree>
								</field>
							</group>
						</page>
						<page string="Demande">
							<group>
								<field name="demande_ids" required="0" nolabel="1" />
							</group>
						</page>
						<!-- <page string="Patrimoine actif">
							<group>
								<field name="ptractif_ids" required="0" nolabel="1" />
							</group>
						</page> -->
						
					</notebook>
					<field name="notes" placeholder="Other Information ..." colspan="4"/> 
				</sheet> 
			</form>
        </field>
    </record> 
   
    <record id="rh_employe_tree_view" model="ir.ui.view" >
        <field name="name">rh.employe.tree</field>
        <field name="model">rh.employe</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Employes">
				<field name="complete_name"/>
				<field name="som"/>
				<field name="email"/>
			</tree>
        </field>
    </record>
	
	<record id="rh_employe_kanban_view" model="ir.ui.view" >
        <field name="name">rh.employe.kanban</field>
        <field name="model">rh.employe</field>
        <field name="arch" type="xml">
            <kanban>
				<templates>
                    <t t-name="kanban-box">
                        <div class="oe_grh_vignette">
							<div class="oe_grh_image">
								<a type="open"><img t-att-src="kanban_image('rh.employe', 'image', record.id.value)" class="oe_grh_picture"/></a>
							</div>
							<div class="oe_grh_details">
								<h4>
									<a type="open">
										<field name="name"/>
										<field name="lastname"/>
										<t t-if="record.name.raw_value"></t>
									</a>
								</h4>
								<ul>
									<!-- <li t-if="record.poste.raw_value"><field name="poste"/></li>
									<li t-if="record.category.raw_value"><field name="category"/></li> -->
								</ul>
							</div>
						</div>
                        <script>
						$('.oe_grh_picture').load(function() { if($(this).width() > $(this).height()) { $(this).addClass('oe_grh_picture_wide') } });
						</script>
                    </t>
                </templates>
            </kanban>

        </field>
    </record>
    
	<record id="rh_employe_act_view" model="ir.actions.act_window" >
        <field name="name">Employes</field>
        <field name="res_model">rh.employe</field>
        <field name="view_type">form</field>
        <field name="view_mode">kanban,tree,form</field>
		<field name="help" type="html"><p class="oe_view_nocontent_create"> Click to define a new record.</p></field>
				
    </record>
    
	<menuitem name="Human Resources" id="rh_root_menu" />
	<menuitem name="Human Resources" id="rh_menu" parent="rh_root_menu" />
	<menuitem name="Employes" id="employes_menu"  parent="rh_menu" action="rh_employe_act_view"/>

        
</data>
</openerp>
